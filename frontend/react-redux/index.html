<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Redux로 React 앱 상태관리 하기 - Avocode</title><meta description="리덕스를 이용한 리액트 앱 상태관리를 TIL 저장소에 간단히 정리하려다가 신이나서 그림까지 그려버렸다. 그런 김에 좀 다듬어서 포스팅 하기로 했다."><meta property="og:type" content="blog"><meta property="og:title" content="Redux로 React 앱 상태관리 하기"><meta property="og:url" content="http://eatnug.github.io/frontend/react-redux/"><meta property="og:site_name" content="Avocode"><meta property="og:description" content="리덕스를 이용한 리액트 앱 상태관리를 TIL 저장소에 간단히 정리하려다가 신이나서 그림까지 그려버렸다. 그런 김에 좀 다듬어서 포스팅 하기로 했다."><meta property="og:locale" content="ko_KR"><meta property="og:image" content="http://eatnug.github.io/assets/cover.png"><meta property="article:published_time" content="2019-11-24T15:00:00.000Z"><meta property="article:modified_time" content="2020-09-25T08:20:48.972Z"><meta property="article:author" content="박건태"><meta property="article:tag" content="react"><meta property="article:tag" content="redux"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/assets/cover.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://eatnug.github.io/frontend/react-redux/"},"headline":"Avocode","image":["http://eatnug.github.io/assets/cover.png"],"datePublished":"2019-11-24T15:00:00.000Z","dateModified":"2020-09-25T08:20:48.972Z","author":{"@type":"Person","name":"박건태"},"description":"리덕스를 이용한 리액트 앱 상태관리를 TIL 저장소에 간단히 정리하려다가 신이나서 그림까지 그려버렸다. 그런 김에 좀 다듬어서 포스팅 하기로 했다."}</script><link rel="canonical" href="http://eatnug.github.io/frontend/react-redux/"><link rel="icon" href="/assets/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-161422442-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-161422442-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/rss2.xml" title="Avocode" type="application/rss+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/assets/logo.svg" alt="Avocode" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/eatnug"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="카탈로그" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/assets/cover.png" alt="Redux로 React 앱 상태관리 하기"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-11-24T15:00:00.000Z" title="2019-11-24T15:00:00.000Z">2019-11-25</time>게시 됨</span><span class="level-item"><time dateTime="2020-09-25T08:20:48.972Z" title="2020-09-25T08:20:48.972Z">2020-09-25</time>업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/frontend/">frontend</a></span><span class="level-item">21분안에 읽기 (약 3092 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile">Redux로 React 앱 상태관리 하기</h1><div class="content"><p>리덕스를 이용한 리액트 앱 상태관리를 <a target="_blank" rel="noopener" href="https://github.com/eaTnuG/TIL">TIL</a> 저장소에 간단히 정리하려다가 신이나서 그림까지 그려버렸다. 그런 김에 좀 다듬어서 포스팅 하기로 했다.</p>
<a id="more"></a>

<h2 id="React의-문제-상태관리"><a href="#React의-문제-상태관리" class="headerlink" title="React의 문제 - 상태관리"></a>React의 문제 - 상태관리</h2><p>리액트는 결국 데이터 변화에 따른 렌더링을 관리하기 위한 라이브러리이다. 그래서 이 데이터의 변화 또는 데이터 자체를 잘 관리하는 것이 중요한 작업인데, 그렇게 쉽지만은 않다.</p>
<p>UI의 각 부분을 컴포넌트라는 독립적인 부분으로 나누어서 구현하는데, 이때 어떤 데이터를 어떤 컴포넌트의 state로 관리할지를 정하는 것이 어렵기 때문이다. 편의를 위해 최상위 컴포넌트에서 모든 데이터를 관리할 수도 있지만 그렇게 되면 실제로 데이터를 다룰 컴포넌트에게 데이터를 전달하는 과정이 번거로워질 수 있다.</p>
<h2 id="상태관리-도구-Redux"><a href="#상태관리-도구-Redux" class="headerlink" title="상태관리 도구, Redux"></a>상태관리 도구, Redux</h2><p>이러한 state, 즉 상태관리의 문제를 해결하기 위한 도구가 바로 리덕스이다. 사실 이는 리액트를 위해 만들어진 도구는 아니고, 그냥 상태관리를 위한 JS 라이브러리이다. 그래서 실제로 리액트 앱에서 사용하는 코드를 보면 <code>react-redux</code>라는 추가적인 패키지를 사용해 둘을 연결해주어야한다. 하지만 이건 나중에 보고 우선 큰 그림을 보자.</p>
<p><img src="/images/react-redux/withredux.png"></p>
<p>간단히 설명하자면 store 라는 상태관리를 위한 전역적인 컨테이너를 생성해서 사용하는 것이다. 리덕스를 어떻게 사용할 수 있는지 알아보자.</p>
<h2 id="Redux-기본-개념"><a href="#Redux-기본-개념" class="headerlink" title="Redux 기본 개념"></a>Redux 기본 개념</h2><p>그렇다면 store를 이용한 상태관리는 어떻게 이루어질까?</p>
<p><img src="/images/react-redux/store.png"></p>
<p>위의 그림은 store와 컴포넌트의 상호작용을 간략하게 표현한 것이다.</p>
<p><strong>store</strong> 는 우리가 관리하려는 데이터인 <strong>state</strong> 와 <strong>reducer</strong> 라는 것을 가지고있다. 데이터를 수정하고자 할 때 컴포넌트는 <strong>action</strong> 을 <strong>dispatch</strong> 하고, 필요한 데이터를 가져올 수 있다.</p>
<p>갑자기 새로운 용어들이 마구 쏟아져나왔다. 이들은 리덕스 패턴을 구성하는 요소들이다. 좀 더 자세히 알아보자.</p>
<h3 id="store-상태-저장소"><a href="#store-상태-저장소" class="headerlink" title="store (상태 저장소)"></a><strong>store</strong> (상태 저장소)</h3><p>말 그대로 상태를 저장하는 곳이다. store는 두 가지 요소로 구성된다. 우리가 다룰 데이터의 현재 상태인 state와 데이터를 변경하기 위한 인터페이스인 reducer가 그것이다. 간략하게 나타내면 아래와 같은 형태이다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = &#123;</span><br><span class="line">    <span class="string">&quot;State&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;session&quot;</span>: data,</span><br><span class="line">        <span class="string">&quot;other&quot;</span>: things</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;Reducer&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;sessionReducer&quot;</span>: func to change session data,</span><br><span class="line">        <span class="string">&quot;otherReducer&quot;</span>: func to change other data</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Reducer에 대해서는 별도의 항목에서 더 자세히 설명하겠다.</p>
<h3 id="dispatch-state-수정-인터페이스"><a href="#dispatch-state-수정-인터페이스" class="headerlink" title="dispatch (state 수정 인터페이스)"></a><strong>dispatch</strong> (state 수정 인터페이스)</h3><p>상태를 변경하려고 할 때에는 store에게 어떤 데이터를 어떻게 변경할 지 알려줘야한다. 이 때 이런 내용을 전달하기 위한 인터페이스가 바로 dispatch이다. 인자로 내가 <strong>어떤 변경을 할 것</strong> 인지에 대한 정보를 담아서 호출하면 이것이 store에게 전달된다.</p>
<h3 id="action-store에-전달할-메시지"><a href="#action-store에-전달할-메시지" class="headerlink" title="action (store에 전달할 메시지)"></a><strong>action</strong> (store에 전달할 메시지)</h3><p>이부분과 reducer가 가장 이해하기 어려웠 던 것 같다. 쉽게 말하면 <strong>‘내가 하려는 어떤 행동’</strong> 이라고 생각하면 된다.</p>
<blockquote>
<p>아케이드 게임기를 생각해보자. 펀치, 킥, 점프 등의 버튼이 있고 유저는 어떤 동작을 취하기 위해서 버튼을 누를 것이다. 이때 내가 취하려는 동작인 펀치, 킥, 점프 등이 action이다.</p>
</blockquote>
<h3 id="reducer-action-해석기"><a href="#reducer-action-해석기" class="headerlink" title="reducer (action 해석기)"></a><strong>reducer</strong> (action 해석기)</h3><p>위의 사진에서 볼 수 있듯이 컴포넌트가 action을 dispatch하면 이는 먼저 reducer를 거치고 state로 넘어가게 된다. reducer가 컴포넌트로부터의 메시지를 받아서 해석하고 state에 적절한 작업을 반영하는 것이다.</p>
<blockquote>
<p>내가 점프 버튼을 누르면 게임 속 캐릭터는 이를 이해하고 뛰어오르는데, 이를 가능하게 하는 것이 reducer이다.</p>
</blockquote>
<h2 id="Redux로-React-앱-상태관리-하기"><a href="#Redux로-React-앱-상태관리-하기" class="headerlink" title="Redux로 React 앱 상태관리 하기"></a>Redux로 React 앱 상태관리 하기</h2><p>아케이드 게임기를 예로 들어 리덕스의 작업 흐름을 이해해보자.</p>
<p><img src="/images/react-redux/arcade.png"></p>
<p>위 그림에서 각 버튼은 왼쪽, 가운데, 오른쪽으로 구슬을 발사하고, 필살기로 폭탄을 사용한다, 화면 아래쪽의 캐릭터는 사용자 입력에 따라 대포의 방향을 바꾸거나 구슬 대신 폭탄을 발사해준다. 발사된 구슬은 궤도대로 날아가 다른 구슬들 옆에 붙거나 터지고 폭탄이 날아가 많은 구슬을 터트리기도 한다.</p>
<p>리덕스 패턴도 이와 같이 동작하는데, 실제로 이를 구현하는 규칙이 절대적으로 정해져 있지는 않고 몇가지 패턴들만 존재한다. 우선은 공식 문서의 형태를 따르기로 하자.</p>
<p>앞서 살펴본 리덕스의 구성 요소 중 우리가 직접 만들어야 하는 것은 <strong>action</strong> 과 <strong>reducer</strong> 이다.</p>
<h3 id="action-만들기"><a href="#action-만들기" class="headerlink" title="action 만들기"></a>action 만들기</h3><p>아케이드 게임의 비유를 떠올려보자. 여기서 우리에게 만들고자 하는 동작은 왼쪽, 가운데, 오른쪽으로 대포를 발사해 해당 방향에 구슬을 붙이는 것, 그리고 폭탄을 발사하는 것이다. 이를 구현하는 코드를 보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* actions.js */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * action types</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> LEFT = <span class="string">&#x27;SHOT_LEFT&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CENTER = <span class="string">&#x27;SHOT_CENTER&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RIGHT = <span class="string">&#x27;SHOT_RIGHT&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> BOMB = <span class="string">&#x27;SHOT_BOMB&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * action creators</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">L</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">type</span>: LEFT &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">type</span>: CENTER &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">R</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">type</span>: RIGHT &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">bomb</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">type</span>: BOMB, <span class="attr">bomb</span>: bomb &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>우리가 구현할 것은 action 한 가지 라고 했는데 코드에서는 두 가지로 나뉘어졌다. 이는 나중에 프로젝트 규모가 커지는 경우 그리고 각 액션에 인자로 넘길 데이터가 생길 경우 등을 고려해 단계를 나누어 둔 것이다.</p>
<p>action type은 우리가 하고자 하는 행동을 나타낸다. 위의 예시에서는 각 방향으로 구슬 쏘기와 폭탄 발사하기가 된다.</p>
<p>action creator는 각 행동에 대해 특정 형태의 객체를 아웃풋으로 내는 함수인데, 추가적으로 필요한 인자도 여기서 처리해준다. 쉽게 말하자면 우리가 하고자 하는 행동을 store에게 reducer가 해석할 수 있는 정형화 된 형태로 만들어주는 것 이다.</p>
<p>이는 아케이드 게임에서 버튼의 역할과 비슷하다고 볼 수 있다. 왼쪽으로 구슬을 쏘겠다는 우리의 의사를 전기적 신호로 만들어 주는것이 바로 action creator이고, 이 결과로 만들어지는 전기 신호, 객체가 바로 action이다.</p>
<p>다시말해 action 을 만들기 위해서는, 데이터에 가할 조작의 종류인 action type을 지정하고 이러한 action을 store가 받아들일 수 있는 (엄밀히 말하면 reducer가 해석할 수 있는) 형태로 만들어주는 action creator를 만들어주면 된다.</p>
<h3 id="reducer-만들기"><a href="#reducer-만들기" class="headerlink" title="reducer 만들기"></a>reducer 만들기</h3><p>이제는 우리의 action을 해석해서 state에 적절한 작업을 취해 줄 reducer를 만들어야 한다. reducer는 우리가 L 버튼을 누르면 대포를 왼쪽으로 돌리고 발사해야한다. 이를 코드로 구현해보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reducers.js */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; LEFT, CENTER, RIGHT, BOMB &#125; <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbles</span> (<span class="params">state = <span class="string">&quot;initial state&quot;</span>, action</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.type)&#123;</span><br><span class="line">        <span class="keyword">case</span> LEFT:</span><br><span class="line">            <span class="keyword">return</span> newStateAfterAction</span><br><span class="line">        <span class="keyword">case</span> CENTER:</span><br><span class="line">            <span class="keyword">return</span> newStateAfterAction</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">otherState</span> (<span class="params">state = <span class="string">&quot;other initial state&quot;</span>, action</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.type)&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">  bubbles,</span><br><span class="line">  otherState</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> reducer</span><br></pre></td></tr></table></figure>

<p>좀 복잡해보인다. 하나하나 천천히 뜯어봐야겠다.</p>
<p><code>bubbles</code>는 구슬의 상태 정보를 다루는 reducer이다. 우선 현재의 상태 정보인 <code>state</code>를 인자로 받고, 만약 입력이 없다면 초기값을 할당해준다. 그리고 우리가 만든 action creator가 반환하는 객체인 <code>action</code>도 인자로 받는다. 내부에서는 action type에 따라서 변화가 반영된 새로운 <code>state</code> 값을 반환한다. 여기서 주의할 점은 기존의 <code>state</code> 값을 변경하는 것이 아니라, 새로운 값을 리턴해야한다는 것이다. 이는 redux를 사용하며 지켜야하는 원칙이다. 따라서 <code>Spread Operator</code>가 자주 사용되고는 한다.</p>
<p>그 다음 함수는 우리가 상태를 관리할 또 다른 데이터에 관한 reducer 인데, 이는 우리의 비유가 아닌 실제 앱을 위한 예시이다. 실제 프로젝트에서 우리가 다루는 상태(state)는 꽤 복잡하고 크다. 즉 다양한 데이터를 다룬다는 것이다. 각 데이터 마다 수행할 작업(action)이 다르기 때문에 reducer는 데이터 마다 하나씩 만들어야한다.</p>
<p>현재 우리 앱의 <code>state</code>를 보면 아래와 같은 상태일 것이다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    bubbles: ~~~,</span><br><span class="line">    otherState: ~~~</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이제 우리가 만든 개별 리듀서들이 <code>state</code>의 각 값들을 핸들링 할 수 있게 매칭해주어야 한다. 이를 코드로 보면 다음과 같을 것이다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    bubbles: bubbles(state.bubbles, action),</span><br><span class="line">    otherState: otherState(state.otherState, action),</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>실제 앱에서 많은 데이터들을 다루는 많은 리듀서들을 이렇게 하나하나 합치는 작업을 편하게 해주기 위한 함수가 바로 <code>combineReducer</code>이다. 아래의 코드는 위의 코드와 동일하다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">  bubbles,</span><br><span class="line">  otherState,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>드디어 action과 reducer를 다 만들었다. 이제 store를 생성하고 사용하기만 하면 된다.</p>
<h3 id="store-생성하고-상태관리-하기"><a href="#store-생성하고-상태관리-하기" class="headerlink" title="store 생성하고 상태관리 하기"></a>store 생성하고 상태관리 하기</h3><p>이제 실제 리액트 앱에서 리덕스를 이용해 상태관리를 해보자.</p>
<p>리덕스의 store는 모든 컴포넌트가 공유하는 전역적인 상태 컨테이너라고 했다. 그렇기 때문에 최상위 컴포넌트를 렌더링하는 곳에서 store를 선언하고 하위 컴포넌트들에게 전달 해주어야 한다.</p>
<p>아래 코드는 CRA로 만들어진 리액트 앱에서 store를 생성하고 하위 컴포넌트로 전달하는 예시이다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.js */</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducers&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer)</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>우선 최상위 컴포넌트인 <code>&lt;App /&gt;</code>을 DOM에 렌더링하는 <code>index.js</code>에서 작업을 진행한다. 우선 <code>redux</code> 패키지의 <code>createStore</code>에 우리가 만든 <code>reducer</code>를 인자로 넘겨 <code>store</code>를 만든다. 그리고 <code>react-redux</code> 패키지의 <code>Provider</code> 컴포넌트를 활용해 해당 <code>store</code>를 하위 컴포넌트 모두가 접근 가능하도록 전달한다.</p>
<p>거의 다 왔다. 이제 실제로 컴포넌트에서 <code>store</code>에 접근해 <code>state</code>를 변경시키고 값을 읽어오는 과정을 보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* App.js */</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; L, C, R, B &#125; <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> bubbles = useSelector(<span class="function"><span class="params">state</span> =&gt;</span> state.bubbles)</span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;Panel&quot;</span>&gt;&#123;bubbles&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;Buttons&quot;</span>&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(L())&#125;&gt;L&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(R())&#125;&gt;C&lt;/button&gt;</span><br><span class="line">        ...</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App</span><br></pre></td></tr></table></figure>

<p>위는 실제로 데이터를 조작하는 <code>&lt;App /&gt;</code> 컴포넌트다. <code>react-redux</code>에서 <code>useSelector, useDispatch</code> 를 불러와 사용한다.</p>
<p><code>useSelector</code> 함수를 사용해 <code>state</code>의 특정 값을 불러올 수 있다. 그리고 <code>useDispatch</code> 함수를 사용해 <code>store</code>에 <code>dispatch</code> 하는 함수를 지역 변수에 할당해 사용할 수 있다.</p>
<p>그리고 <code>dispatch</code> 함수를 호출하는 형태에 유의하자. 이벤트가 발동되면 <code>dispatch</code> 함수를 호출하는데 이때 인자로 우리가 만들었던 action creator 함수의 결과값을 넘겨준다. 이는 결국 action type과 추가적인 인자를 가진 <code>action</code> 객체를 <code>dispatch</code> 한다는 의미이다.</p>
<p>이렇게 리덕스를 활용한 리액트 앱 상태관리가 끝났다.</p>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li><a target="_blank" rel="noopener" href="https://redux.js.org/">Redux.js</a></li>
</ul>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/react/">react</a><a class="link-muted mr-2" rel="tag" href="/tags/redux/">redux</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/frontend/storybook/first/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">스토리북을 이용한 컴포넌트 개발 (1) - 시작하기</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/frontend/virtual-dom/"><span class="level-item">번역] Virtual DOM 이해하기</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">댓글</h3><script src="https://utteranc.es/client.js" repo="eatnug/inbox" issue-term="pathname" crossorigin="anonymous" async></script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/assets/character.png" alt="Eatnug"></figure><p class="title is-size-4 is-block line-height-inherit">Eatnug</p><p class="is-size-6 is-block">Have never had an avocado</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Seoul/Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">15</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/eatnug" target="_blank" rel="noopener">팔로우</a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/etc/"><span class="level-start"><span class="level-item">etc</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/frontend/"><span class="level-start"><span class="level-item">frontend</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/logs/"><span class="level-start"><span class="level-item">logs</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/mobile/"><span class="level-start"><span class="level-item">mobile</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/codepush/"><span class="tag">codepush</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dom/"><span class="tag">dom</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/eslint/"><span class="tag">eslint</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gatsby/"><span class="tag">gatsby</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gh-pages/"><span class="tag">gh-pages</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/prettier/"><span class="tag">prettier</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-native/"><span class="tag">react-native</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redux/"><span class="tag">redux</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/storybook/"><span class="tag">storybook</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/testing/"><span class="tag">testing</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tools/"><span class="tag">tools</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tranlated/"><span class="tag">tranlated</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/translated/"><span class="tag">translated</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/typescript/"><span class="tag">typescript</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">9월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">5월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">4월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">3월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/11/"><span class="level-start"><span class="level-item">11월 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">카탈로그</h3><ul class="menu-list"><li><a class="is-flex" href="#React의-문제-상태관리"><span class="mr-2">1</span><span>React의 문제 - 상태관리</span></a></li><li><a class="is-flex" href="#상태관리-도구-Redux"><span class="mr-2">2</span><span>상태관리 도구, Redux</span></a></li><li><a class="is-flex" href="#Redux-기본-개념"><span class="mr-2">3</span><span>Redux 기본 개념</span></a><ul class="menu-list"><li><a class="is-flex" href="#store-상태-저장소"><span class="mr-2">3.1</span><span>store (상태 저장소)</span></a></li><li><a class="is-flex" href="#dispatch-state-수정-인터페이스"><span class="mr-2">3.2</span><span>dispatch (state 수정 인터페이스)</span></a></li><li><a class="is-flex" href="#action-store에-전달할-메시지"><span class="mr-2">3.3</span><span>action (store에 전달할 메시지)</span></a></li><li><a class="is-flex" href="#reducer-action-해석기"><span class="mr-2">3.4</span><span>reducer (action 해석기)</span></a></li></ul></li><li><a class="is-flex" href="#Redux로-React-앱-상태관리-하기"><span class="mr-2">4</span><span>Redux로 React 앱 상태관리 하기</span></a><ul class="menu-list"><li><a class="is-flex" href="#action-만들기"><span class="mr-2">4.1</span><span>action 만들기</span></a></li><li><a class="is-flex" href="#reducer-만들기"><span class="mr-2">4.2</span><span>reducer 만들기</span></a></li><li><a class="is-flex" href="#store-생성하고-상태관리-하기"><span class="mr-2">4.3</span><span>store 생성하고 상태관리 하기</span></a></li></ul></li><li><a class="is-flex" href="#참고"><span class="mr-2">5</span><span>참고</span></a></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><a class="media-left" href="/mobile/react-native-codepush/"><p class="image is-64x64"><img class="fill" src="/images/react-native-codepush/cover.png" alt="codepush로 react-native 앱 심사 없이 업데이트 하기"></p></a><div class="media-content size-small"><p><time dateTime="2020-09-22T15:00:00.000Z">2020-09-23</time></p><p class="title is-6"><a class="link-muted" href="/mobile/react-native-codepush/">codepush로 react-native 앱 심사 없이 업데이트 하기</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/mobile/">mobile</a></p></div></article><article class="media"><a class="media-left" href="/frontend/modern-react-testing/first/"><p class="image is-64x64"><img class="fill" src="/images/modern-react-testing/cover.png" alt="번역] 모던 리액트 테스팅, 파트 1 - 모범사례"></p></a><div class="media-content size-small"><p><time dateTime="2020-05-02T15:00:00.000Z">2020-05-03</time></p><p class="title is-6"><a class="link-muted" href="/frontend/modern-react-testing/first/">번역] 모던 리액트 테스팅, 파트 1 - 모범사례</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/frontend/">frontend</a></p></div></article><article class="media"><a class="media-left" href="/etc/eslint-prettier-ts/"><p class="image is-64x64"><img class="fill" src="/assets/thumbnail.png" alt="번역] 타입스크립트 프로젝트에서 eslint와 prettier 사용하기"></p></a><div class="media-content size-small"><p><time dateTime="2020-04-18T15:00:00.000Z">2020-04-19</time></p><p class="title is-6"><a class="link-muted" href="/etc/eslint-prettier-ts/">번역] 타입스크립트 프로젝트에서 eslint와 prettier 사용하기</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/etc/">etc</a></p></div></article><article class="media"><a class="media-left" href="/frontend/storybook/first/"><p class="image is-64x64"><img class="fill" src="/images/storybook/cover.png" alt="스토리북을 이용한 컴포넌트 개발 (1) - 시작하기"></p></a><div class="media-content size-small"><p><time dateTime="2020-03-20T15:00:00.000Z">2020-03-21</time></p><p class="title is-6"><a class="link-muted" href="/frontend/storybook/first/">스토리북을 이용한 컴포넌트 개발 (1) - 시작하기</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/frontend/">frontend</a></p></div></article><article class="media"><a class="media-left" href="/frontend/react-redux/"><p class="image is-64x64"><img class="fill" src="/assets/thumbnail.png" alt="Redux로 React 앱 상태관리 하기"></p></a><div class="media-content size-small"><p><time dateTime="2019-11-24T15:00:00.000Z">2019-11-25</time></p><p class="title is-6"><a class="link-muted" href="/frontend/react-redux/">Redux로 React 앱 상태관리 하기</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/frontend/">frontend</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/assets/logo.svg" alt="Avocode" height="28"></a><p class="size-small"><span>&copy; 2020 박건태</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/eatnug"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>